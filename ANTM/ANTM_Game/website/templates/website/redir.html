{% extends "base.html" %}

{% block title %} You've Selected! {% endblock %}

{% block content %}

<a href = "{% url 'welcome' %}">Home</a>
<br>
<br>
{% if wordbank %}
  <table>
    <thead>Cycle {{cyc_id}} Contestants</thead>
    {% for ml in my_list_shuff %}
    <tr>
      <td>{{ml}}</td>
    </tr>
    {% endfor %}
    </table>
  {% else %}
    <form name = 'fillform' class='form-creation' method='POST'>
      {% csrf_token %}
      {% for ml in my_list %}
        <input name = '{{ml}}' id = '{{ml}}' type='text' maxlength="20"></input>
        <ul id='options'></ul>
        <script>
          const data = {{my_list | safe}};
          const autocomplete = document.getElementById('{{ml}}');
          const resultsHTML = document.getElementById("options");

          autocomplete.oninput = function () {
            let results = [];
            const userInput = this.value;
            resultsHTML.innerHTML = "";
            if (userInput.length > 0) {
              results = getResults(userInput);
              resultsHTML.style.display = "block";
              for (i = 0; i < results.length; i++) {
                resultsHTML.innerHTML += "<li>" + results[i] + "</li>";
          }
        }
      };

        function getResults(input) {
          const results = [];
          for (i = 0; i < data.length; i++) {
            if (input === data[i].slice(0, input.length)) {
              results.push(data[i]);
            }
          }
          return results;
        };

      resultsHTML.onclick = function (event) {
        const setValue = event.target.innerText;
        autocomplete.value = setValue;
        this.innerHTML = "";
      };
    </script>

      {% endfor %}
      <button type="submit">Submit</button>
      </form>
{% endif %}

{% endblock %}
